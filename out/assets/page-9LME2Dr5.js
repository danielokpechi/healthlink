import{r,u as C,j as e}from"./index-BKgZRCvf.js";import{H as D,B as d,F as S}from"./Footer-BgyF9YbZ.js";import{C as h}from"./Card-BV6nY3lC.js";import{B as j}from"./Badge-DrLAeyKa.js";function $(){const[c,b]=r.useState(null),[t,m]=r.useState(!1),[x,f]=r.useState(!1),[N,y]=r.useState(!1),g=C(),[s,u]=r.useState({firstName:"",lastName:"",email:"",phone:"",bloodType:"",dateOfBirth:"",address:"",emergencyContact:"",emergencyPhone:"",medicalConditions:"",lastDonation:""}),v=["A+","A-","B+","B-","AB+","AB-","O+","O-"],[o]=r.useState([{id:1,date:"2024-01-15",location:"City General Blood Bank",bloodType:"O+",quantity:"1 pint",status:"completed"},{id:2,date:"2023-11-20",location:"Regional Medical Center",bloodType:"O+",quantity:"1 pint",status:"completed"},{id:3,date:"2023-09-10",location:"Community Blood Services",bloodType:"O+",quantity:"1 pint",status:"completed"}]);r.useEffect(()=>{const a=localStorage.getItem("bloodlink_user");if(!a){g("/auth");return}const l=JSON.parse(a);if(l.type!=="donor"){g("/");return}b(l);const p=localStorage.getItem(`bloodlink_profile_${l.id}`);u(p?JSON.parse(p):{firstName:l.firstName||"",lastName:l.lastName||"",email:l.email||"",phone:l.phone||"",bloodType:l.bloodType||"",dateOfBirth:l.dateOfBirth||"",address:"",emergencyContact:"",emergencyPhone:"",medicalConditions:"",lastDonation:"2024-01-15"})},[g]);const i=a=>{u({...s,[a.target.name]:a.target.value})},k=async()=>{f(!0),await new Promise(l=>setTimeout(l,1e3)),localStorage.setItem(`bloodlink_profile_${c.id}`,JSON.stringify(s));const a={...c,firstName:s.firstName,lastName:s.lastName,email:s.email,phone:s.phone,bloodType:s.bloodType,dateOfBirth:s.dateOfBirth};localStorage.setItem("bloodlink_user",JSON.stringify(a)),b(a),f(!1),m(!1),y(!0),setTimeout(()=>y(!1),3e3)},w=()=>{if(!s.lastDonation)return"Unknown";const a=new Date(s.lastDonation),l=new Date(a);return l.setDate(l.getDate()+56),l.toLocaleDateString()},n=()=>{if(!s.lastDonation)return!0;const a=new Date(s.lastDonation);return Math.floor((new Date().getTime()-a.getTime())/(1e3*60*60*24))>=56};return c?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(D,{}),e.jsx("section",{className:"bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white pt-24",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("div",{className:"w-20 h-20 bg-white/20 rounded-full flex items-center justify-center",children:e.jsx("i",{className:"ri-user-heart-line text-white text-3xl"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2",children:[s.firstName," ",s.lastName]}),e.jsxs("p",{className:"text-pink-100 text-lg",children:["Blood Type: ",s.bloodType||"Not specified"]}),e.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[e.jsx(j,{variant:n()?"success":"warning",className:"bg-white/20 text-white",children:n()?"Eligible to Donate":"Not Eligible Yet"}),e.jsxs("span",{className:"text-pink-100 text-sm",children:["Total Donations: ",o.length]})]})]})]}),e.jsx("div",{className:"flex space-x-3",children:t?e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(d,{onClick:()=>m(!1),className:"bg-white/20 border border-white/30 text-white hover:bg-white/30",children:"Cancel"}),e.jsxs(d,{onClick:k,disabled:x,className:"bg-white text-pink-600 hover:bg-gray-50",children:[x?e.jsx("i",{className:"ri-loader-4-line mr-2 animate-spin"}):e.jsx("i",{className:"ri-save-line mr-2"}),x?"Saving...":"Save Changes"]})]}):e.jsxs(d,{onClick:()=>m(!0),className:"bg-white text-pink-600 hover:bg-gray-50",children:[e.jsx("i",{className:"ri-edit-line mr-2"}),"Edit Profile"]})})]})})}),N&&e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-check-line text-green-500 mr-2"}),e.jsx("span",{className:"text-green-800",children:"Profile updated successfully!"})]})})}),e.jsx("section",{className:"py-8",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(h,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Personal Information"}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name"}),e.jsx("input",{type:"text",name:"firstName",value:s.firstName,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name"}),e.jsx("input",{type:"text",name:"lastName",value:s.lastName,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Type"}),e.jsxs("select",{name:"bloodType",value:s.bloodType,onChange:i,disabled:!t,className:`w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`,children:[e.jsx("option",{value:"",children:"Select blood type"}),v.map(a=>e.jsx("option",{value:a,children:a},a))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),e.jsx("input",{type:"date",name:"dateOfBirth",value:s.dateOfBirth,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{name:"address",value:s.address,onChange:i,disabled:!t,rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`,placeholder:"Enter your full address"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Name"}),e.jsx("input",{type:"text",name:"emergencyContact",value:s.emergencyContact,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Contact Phone"}),e.jsx("input",{type:"tel",name:"emergencyPhone",value:s.emergencyPhone,onChange:i,disabled:!t,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Medical Conditions / Allergies"}),e.jsx("textarea",{name:"medicalConditions",value:s.medicalConditions,onChange:i,disabled:!t,rows:3,className:`w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 ${t?"":"bg-gray-50 text-gray-600"}`,placeholder:"List any medical conditions, allergies, or medications"})]})]})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(h,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Donation Status"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center p-4 bg-pink-50 rounded-lg",children:[e.jsx("div",{className:`w-16 h-16 mx-auto mb-3 rounded-full flex items-center justify-center ${n()?"bg-green-100":"bg-yellow-100"}`,children:e.jsx("i",{className:`text-2xl ${n()?"ri-check-line text-green-500":"ri-time-line text-yellow-500"}`})}),e.jsx("p",{className:"font-semibold text-gray-900 mb-1",children:n()?"Ready to Donate!":"Not Eligible Yet"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Next eligible date: ",w()]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Last Donation:"}),e.jsx("span",{className:"font-medium",children:s.lastDonation||"Never"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Total Donations:"}),e.jsx("span",{className:"font-medium",children:o.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Lives Saved:"}),e.jsx("span",{className:"font-medium text-pink-600",children:o.length*3})]})]})]})]}),e.jsxs(h,{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Donation History"}),e.jsx("div",{className:"space-y-3",children:o.map(a=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:a.location}),e.jsx("p",{className:"text-sm text-gray-600",children:a.date})]}),e.jsx(j,{variant:"success",size:"sm",children:a.status})]}),e.jsxs("div",{className:"flex justify-between text-sm text-gray-600",children:[e.jsx("span",{children:a.bloodType}),e.jsx("span",{children:a.quantity})]})]},a.id))}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(d,{variant:"outline",size:"sm",className:"w-full",children:"View Full History"})})]})]})]})})}),e.jsx(S,{})]}):e.jsx("div",{children:"Loading..."})}export{$ as default};
//# sourceMappingURL=page-9LME2Dr5.js.map
