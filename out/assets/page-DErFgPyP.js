import{a as P,p as R,r as i,j as e,L as u,l as C,m as L,d as T,e as f,f as D}from"./index-C6PY5QRv.js";import{H as E,B as l,F as z}from"./Footer-BepvwvVu.js";import{C as b}from"./Card-D3mEm6qj.js";import{B as Q}from"./Badge-B-7gq-4s.js";import{b as A}from"./blood-bank-C40kJasn.js";function O(){const g=P(),{id:x}=R(),[n,y]=i.useState(""),[N,o]=i.useState(!1),[d,m]=i.useState(1),[t,v]=i.useState(null);i.useEffect(()=>{(async()=>{const a=C(f,"blood_banks",x),r=await L(a);if(!r.exists())return;const h={id:r.id,...r.data()},S=T(f,"blood_banks",r.id,"inventory"),q=await D(S),j=[];q.forEach(c=>{j.push({type:c.id,quantity:c.data().quantity,price:c.data().price,status:c.data().available?"in-stock":"out-of-stock"})}),h.bloodTypes=j,v(h)})()},[x]);const k=(s,a)=>a==="out-of-stock"||s===0?{variant:"danger",text:"Out of Stock"}:s<5?{variant:"warning",text:"Low Stock"}:s<10?{variant:"pink",text:"Moderate Stock"}:{variant:"success",text:"In Stock"},B=s=>{g(`/request?bank=${t.id}&type=${s}`)},p=()=>{const s=t.bloodTypes.find(a=>a.type===n);return s?s.price*d:0},w=()=>{console.log("Blood request submitted:",{bloodBank:t.name,bloodType:n,quantity:d,total:p()}),o(!1),y(""),m(1)};return t?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(E,{}),e.jsx("section",{className:"relative bg-white mt-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center space-x-2 mb-4",children:e.jsxs(u,{to:"/blood-banks",className:"text-pink-500 hover:text-pink-600 text-sm font-medium",children:[e.jsx("i",{className:"ri-arrow-left-line mr-1"}),"Back to Blood Banks"]})}),e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:t.name}),e.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),e.jsxs("div",{className:"space-y-3 mb-6",children:[e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("i",{className:"ri-map-pin-line mr-3 text-pink-500"}),e.jsx("span",{children:t.address})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("i",{className:"ri-phone-line mr-3 text-pink-500"}),e.jsx("a",{href:`tel:${t.contactPhone}`,className:"hover:text-pink-500",children:t.contactPhone})]}),e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx("i",{className:"ri-mail-line mr-3 text-pink-500"}),e.jsx("span",{children:t.contactEmail})]})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs(l,{size:"lg",children:[e.jsx("i",{className:"ri-calendar-line mr-2"}),e.jsx(u,{to:"/donate",children:"Schedule Donation"})]})})]}),e.jsx("div",{children:e.jsx("img",{src:A,alt:t.name,className:"w-full h-80 object-fit object-top rounded-lg "})})]})})}),e.jsx("section",{className:"py-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Blood Types & Pricing"}),e.jsx("p",{className:"text-gray-600",children:"Current availability and pricing for all blood types. Prices are set per pint."})]}),e.jsxs(b,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Blood Type"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Quantity Available"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Price per Pint"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Action"})]})}),e.jsx("tbody",{children:t.bloodTypes.map(s=>{const a=k(s.quantity,s.status);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-drop-line text-pink-500"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.type})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-gray-700",children:[s.quantity," units"]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("span",{className:"text-lg font-semibold text-gray-900",children:["₦",s.price.toLocaleString()]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx(Q,{variant:a.variant,children:a.text})}),e.jsx("td",{className:"py-4 px-4",children:s.quantity>0?e.jsxs(l,{size:"sm",onClick:()=>B(s.type),children:[e.jsx("i",{className:"ri-shopping-cart-line mr-2"}),"Request"]}):e.jsx(l,{size:"sm",variant:"secondary",disabled:!0,children:"Out of Stock"})})]},s.type)})})]})}),e.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("i",{className:"ri-information-line text-blue-500 mt-0.5 mr-2"}),e.jsxs("div",{className:"text-sm text-blue-800",children:[e.jsx("p",{className:"font-medium mb-1",children:"Pricing Information"}),e.jsx("p",{className:"text-blue-700",children:"Prices are set by individual blood banks and may vary based on blood type rarity and processing costs. All prices include testing, processing, and storage fees. Prices shown in Nigerian Naira (₦)."})]})]})})]})]})}),N&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:e.jsxs(b,{className:"w-full max-w-md",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Request Blood"}),e.jsx("button",{onClick:()=>o(!1),className:"text-gray-400 hover:text-gray-600 cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-xl"})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-pink-50 border border-pink-200 rounded-lg p-4",children:e.jsxs("div",{className:"text-sm text-pink-800",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Blood Bank:"})," ",t.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Blood Type:"})," ",n]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Price per Pint:"})," ₦",t.bloodTypes.find(s=>s.type===n)?.price.toLocaleString()]})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity (pints)"}),e.jsx("select",{value:d,onChange:s=>m(Number(s.target.value)),className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500",children:[1,2,3,4,5].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold",children:[e.jsx("span",{children:"Total Cost:"}),e.jsxs("span",{className:"text-pink-500",children:["₦",p().toLocaleString()]})]})}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx(l,{variant:"outline",className:"flex-1",onClick:()=>o(!1),children:"Cancel"}),e.jsxs(l,{className:"flex-1",onClick:w,children:[e.jsx("i",{className:"ri-send-plane-fill mr-2"}),"Submit Request"]})]})]})]})}),e.jsx(z,{})]}):e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:"Loading..."})}export{O as default};
//# sourceMappingURL=page-DErFgPyP.js.map
