import{r,j as e,L as E,q as F,w as O,d as v,f as g,e as f}from"./index-C6PY5QRv.js";import{H as P,B as T,F as I}from"./Footer-BepvwvVu.js";import{C as y}from"./Card-D3mEm6qj.js";import{B as z}from"./Badge-B-7gq-4s.js";import{b as D}from"./blood-bank-C40kJasn.js";function G(){const[c,N]=r.useState(""),[m,B]=r.useState(""),[u,w]=r.useState("distance"),[k,h]=r.useState([]),S=["A+","A-","B+","B-","AB+","AB-","O+","O-"],[p,C]=r.useState([]);r.useEffect(()=>{(async()=>{const a=F(v(f,"blood_banks"),O("approved","==",!0)),t=await g(a),l=[];for(const n of t.docs){const i={id:n.id,...n.data()},d=v(f,"blood_banks",n.id,"inventory"),q=await g(d),b={};let x=1/0;q.forEach(j=>{const o=j.data(),A=j.id;b[A]={quantity:o.quantity,price:o.price,available:o.available},o.price&&o.price<x&&(x=o.price)}),i.availability=b,i.amountPerPint=x===1/0?null:x,l.push(i)}C(l),h(l)})()},[]),r.useEffect(()=>{let s=[...p];c.trim()!==""&&(s=s.filter(a=>a.address.toLowerCase().includes(c.toLowerCase())||a.name.toLowerCase().includes(c.toLowerCase()))),m.trim()!==""&&(s=s.filter(a=>a.availability&&a.availability[m]?.available===!0)),u==="availability"&&(s=s.filter(a=>Object.values(a.availability).some(t=>t.available===!0)),s=s.sort((a,t)=>{const l=Object.values(t.availability).reduce((i,d)=>i+(d.available?1:0),0),n=Object.values(a.availability).reduce((i,d)=>i+(d.available?1:0),0);return l-n})),h(s)},[c,m,u,p]);const L=s=>s<5?{level:"critical",color:"danger"}:s<10?{level:"low",color:"warning"}:{level:"good",color:"success"};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(P,{}),e.jsx("section",{className:"bg-white border-b border-gray-200 mt-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Blood Banks"}),e.jsx("p",{className:"text-gray-600 max-w-2xl mx-auto",children:"View blood banks in your area and check real-time availability of blood types. Find the nearest facility for your donation or blood request needs."})]})})}),e.jsx("section",{className:"py-8 bg-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx(y,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Location"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",placeholder:"Enter your location",value:c,onChange:s=>N(s.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm"}),e.jsx("i",{className:"ri-map-pin-line absolute left-3 top-3.5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Type"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:m,onChange:s=>B(s.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm appearance-none",children:[e.jsx("option",{value:"",children:"All blood types"}),S.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("i",{className:"ri-drop-line absolute left-3 top-3.5 text-gray-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:u,onChange:s=>w(s.target.value),className:"w-full pl-10 pr-8 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm appearance-none",children:[e.jsx("option",{value:"rating",children:"Select"}),e.jsx("option",{value:"availability",children:"Availability"})]}),e.jsx("i",{className:"ri-sort-asc absolute left-3 top-3.5 text-gray-400"})]})]})]})})})}),e.jsx("section",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[p.length," Blood Banks Found"]})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:k.map(s=>e.jsxs(y,{className:"hover:shadow-lg transition-shadow duration-200",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("img",{src:D,alt:s.name,className:"w-full h-48 object-cover object-top rounded-lg"}),e.jsx("div",{className:"absolute top-3 right-3"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsx("div",{className:"flex items-center space-x-1"})]}),e.jsxs("div",{className:"space-y-1 text-sm text-gray-600",children:[e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-map-pin-line mr-2 text-gray-400"}),s.address]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-mail-line mr-2 text-gray-400"}),s.contactEmail]}),e.jsxs("p",{className:"flex items-center",children:[e.jsx("i",{className:"ri-phone-line mr-2 text-gray-400"}),s.contactPhone]})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"Blood Availability"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:s.availability&&Object.entries(s.availability).map(([a,t])=>{const l=L(t.quantity);return e.jsxs("div",{className:"text-center",children:[e.jsx(z,{variant:l.color,size:"md",children:a}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.quantity," units"]})]},a)})})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("div",{className:"text-sm text-gray-600",children:e.jsxs("span",{className:"font-medium",children:["From â‚¦",s.amountPerPint,"/pint"]})})}),e.jsx(E,{to:`/blood-banks/${s.id}`,children:e.jsx(T,{size:"sm",children:"View Details"})})]})]},s.id))})]})}),e.jsx(I,{})]})}export{G as default};
//# sourceMappingURL=page-Dh9y8-2O.js.map
