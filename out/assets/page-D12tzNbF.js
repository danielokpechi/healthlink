const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-C6PY5QRv.js","assets/index-BAq6PnTa.css"])))=>i.map(i=>d[i]);
import{u as _,r as x,a as A,j as e,L as D,s as q,g as S,_ as F,b as L,c as E}from"./index-C6PY5QRv.js";import{H as z,B as k,F as I}from"./Footer-BepvwvVu.js";import{C as O}from"./Card-D3mEm6qj.js";function J(){const{notify:i}=_(),[l,b]=x.useState("donor"),[g,h]=x.useState("login"),[u,N]=x.useState(!1),[B,v]=x.useState(!1),m=A(),[s,C]=x.useState({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",bloodType:"",dateOfBirth:"",organizationName:"",licenseNumber:"",address:""}),P=["A+","A-","B+","B-","AB+","AB-","O+","O-"];x.useEffect(()=>{const n=localStorage.getItem("bloodlink_user");if(n){const r=JSON.parse(n);r.type==="donor"?m("/donor/dashboard"):r.type==="bloodbank"&&m("/blood-banks/dashboard")}},[m]);const a=n=>{C({...s,[n.target.name]:n.target.value})},T=()=>{if(g==="signup"){if(l==="donor"){if(!s.firstName||!s.lastName||!s.email||!s.password||!s.confirmPassword)return i({type:"error",message:"Please fill in all required fields"}),!1;if(s.password!==s.confirmPassword)return i({type:"error",message:"Passwords do not match"}),!1;if(s.password.length<6)return i({type:"error",message:"Password must be at least 6 characters long"}),!1}else if(!s.organizationName||!s.licenseNumber||!s.address||!s.email||!s.phone)return i({type:"error",message:"Please fill in all required fields"}),!1}else if(!s.email||!s.password)return i({type:"error",message:"Please enter your email and password"}),!1;return!0},j=async n=>{if(n.preventDefault(),!!T()){if(N(!0),await new Promise(r=>setTimeout(r,1500)),g==="login")try{const p=(await q(s.email,s.password)).user.uid,c=await S(p);if(!c.exists()){i({type:"error",message:"User profile not found. Please contact support."});return}const t=c.data(),o=(t.userType||t.type||"").toString(),y=o.toLowerCase().includes("blood")?"bloodbank":o.toLowerCase().includes("admin")?"superadmin":"donor",d={id:p,...t,type:y,firstName:t.firstName||(t.fullName?t.fullName.split(" ")[0]:""),lastName:t.lastName||(t.fullName?t.fullName.split(" ").slice(1).join(" "):"")},w=l==="donor"?"donor":"bloodBank";if(d.userType!==w&&d.userType!=="superAdmin"){try{await F(()=>import("./index-C6PY5QRv.js").then(f=>f.B),__vite__mapDeps([0,1])).then(f=>f.signOut())}catch(f){console.warn("Error signing out after role mismatch",f)}i({type:"error",message:`You are signing in as ${l==="donor"?"Donor":"Blood Bank"}. Your account is registered as ${d.userType}. Please choose the correct login type.`}),N(!1);return}localStorage.setItem("bloodlink_user",JSON.stringify(d)),localStorage.setItem("bloodlink_auth_token","firebase_auth_"+Date.now()),d.userType==="donor"?m("/donor/dashboard"):d.userType==="bloodBank"?m("/blood-banks/dashboard"):d.userType==="superAdmin"?m("/admin/dashboard"):m("/")}catch(r){console.error("Login error",r),i({type:"error",message:r?.message||"Login failed"})}else try{if(l==="bloodbank"){const r={fullName:s.organizationName||"",email:s.email,userType:"bloodBank",phone:s.phone||"",address:s.address||""},p={name:s.organizationName||"",address:s.address||"",licenseNumber:s.licenseNumber||"",contactEmail:s.email,contactPhone:s.phone||"",approved:!1,inventory:{}};await L(s.email,s.password,r,p),v(!0),setTimeout(()=>{h("login"),v(!1),C({email:"",password:"",confirmPassword:"",firstName:"",lastName:"",phone:"",bloodType:"",dateOfBirth:"",organizationName:"",licenseNumber:"",address:""})},3e3)}else{const r={fullName:`${s.firstName} ${s.lastName}`,email:s.email,userType:"donor",phone:s.phone||"",address:""},p=await E(s.email,s.password,r);try{const c=p.user.uid,t=await S(c),o=t.exists()?t.data():r,y=(o.userType||o.type||"").toString(),d=y.toLowerCase().includes("blood")?"bloodbank":y.toLowerCase().includes("admin")?"superadmin":"donor",w={id:c,...o,type:d,firstName:o.firstName||(o.fullName?o.fullName.split(" ")[0]:s.firstName),lastName:o.lastName||(o.fullName?o.fullName.split(" ").slice(1).join(" "):s.lastName)};localStorage.setItem("bloodlink_user",JSON.stringify(w)),localStorage.setItem("bloodlink_auth_token","firebase_auth_"+Date.now())}catch(c){console.warn("Failed to persist created user to localStorage",c)}m("/profile")}}catch(r){console.error("Signup error",r),i({type:"error",message:r?.message||"Signup failed."})}N(!1)}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-white to-pink-50/20 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-gradient-to-br from-pink-400/10 to-purple-400/10 rounded-full blur-3xl animate-float"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-gradient-to-br from-blue-400/10 to-pink-400/10 rounded-full blur-3xl animate-float",style:{animationDelay:"-2s"}})]}),e.jsx(z,{}),e.jsx("section",{className:"py-20 relative z-10",children:e.jsxs("div",{className:"max-w-md mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl shadow-lg shadow-pink-500/20 mb-6",children:e.jsx("i",{className:"ri-heart-pulse-fill text-white text-2xl"})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-3",children:g==="login"?"Welcome Back":"Join BloodLink"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:g==="login"?"Sign in to your account to continue saving lives":"Create your account and start making a difference"})]}),e.jsxs(O,{className:"shadow-xl border-0 bg-white/90 backdrop-blur-sm relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-pink-500 to-purple-500"}),g==="login"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-6 p-1 bg-gray-100 rounded-xl",children:[e.jsxs("button",{onClick:()=>b("donor"),className:`flex-1 py-3 px-4 text-sm font-semibold rounded-lg transition-all duration-200 whitespace-nowrap ${l==="donor"?"bg-white text-pink-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-user-heart-line mr-2"}),"Donor/User"]}),e.jsxs("button",{onClick:()=>b("bloodbank"),className:`flex-1 py-3 px-4 text-sm font-semibold rounded-lg transition-all duration-200 whitespace-nowrap ${l==="bloodbank"?"bg-white text-pink-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-hospital-line mr-2"}),"Blood Bank"]})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm transition-all duration-200 bg-white",placeholder:"Enter your email",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:a,className:"w-full px-4 py-3 border border-gray-200 rounded-xl focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm transition-all duration-200 bg-white",placeholder:"Enter your password",required:!0})]}),e.jsx(k,{type:"submit",className:"w-full whitespace-nowrap bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 shadow-lg hover:shadow-pink-500/30 text-white font-semibold py-3",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line mr-2 animate-spin"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-login-box-line mr-2"}),"Sign In"]})}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",onClick:()=>h("signup"),className:"text-pink-500 hover:text-pink-600 text-sm font-medium cursor-pointer transition-colors duration-200",children:"Don't have an account? Sign up here"})})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex mb-6 p-1 bg-gray-100 rounded-xl",children:[e.jsxs("button",{onClick:()=>b("donor"),className:`flex-1 py-3 px-4 text-sm font-semibold rounded-lg transition-all duration-200 whitespace-nowrap ${l==="donor"?"bg-white text-pink-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-user-heart-line mr-2"}),"Donor/User"]}),e.jsxs("button",{onClick:()=>b("bloodbank"),className:`flex-1 py-3 px-4 text-sm font-semibold rounded-lg transition-all duration-200 whitespace-nowrap ${l==="bloodbank"?"bg-white text-pink-600 shadow-sm":"text-gray-600 hover:text-gray-800"}`,children:[e.jsx("i",{className:"ri-hospital-line mr-2"}),"Blood Bank"]})]}),B&&e.jsx("div",{className:"mb-6 p-4 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-xl",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-check-line text-white text-sm"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-green-800 text-sm",children:"Registration Submitted!"}),e.jsx("p",{className:"text-green-700 text-xs",children:"You'll receive login credentials once approved."})]})]})}),l==="donor"?e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"First Name *"}),e.jsx("input",{type:"text",name:"firstName",value:s.firstName,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Last Name *"}),e.jsx("input",{type:"text",name:"lastName",value:s.lastName,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),e.jsx("input",{type:"password",name:"password",value:s.password,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password *"}),e.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Type"}),e.jsxs("select",{name:"bloodType",value:s.bloodType,onChange:a,className:"w-full px-3 py-2 pr-8 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",children:[e.jsx("option",{value:"",children:"Select type"}),P.map(n=>e.jsx("option",{value:n,children:n},n))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm"})]})]}),e.jsx(k,{type:"submit",className:"w-full whitespace-nowrap bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 shadow-lg text-white font-semibold py-3",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line mr-2 animate-spin"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-user-add-line mr-2"}),"Create Account"]})}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",onClick:()=>h("login"),className:"text-pink-500 hover:text-pink-600 text-sm font-medium cursor-pointer transition-colors duration-200",children:"Already have an account? Sign in"})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Blood Bank Registration"}),e.jsx("p",{className:"text-gray-600 text-sm",children:"Registration requires offline verification for security"})]}),e.jsxs("form",{onSubmit:j,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Facility Name *"}),e.jsx("input",{type:"text",name:"organizationName",value:s.organizationName,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Number *"}),e.jsx("input",{type:"text",name:"licenseNumber",value:s.licenseNumber,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address *"}),e.jsx("input",{type:"text",name:"address",value:s.address,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email *"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone *"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:a,className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:ring-2 focus:ring-pink-500/20 focus:border-pink-500 text-sm",required:!0})]})]}),e.jsx(k,{type:"submit",className:"w-full whitespace-nowrap bg-gradient-to-r from-pink-500 to-purple-500 hover:from-pink-600 hover:to-purple-600 shadow-lg text-white font-semibold py-3",disabled:u,children:u?e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-loader-4-line mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx("i",{className:"ri-send-plane-fill mr-2"}),"Submit Application"]})})]}),e.jsx("div",{className:"text-center pt-4",children:e.jsx("button",{type:"button",onClick:()=>h("login"),className:"text-pink-500 hover:text-pink-600 text-sm font-medium cursor-pointer transition-colors duration-200",children:"Already registered? Sign in"})})]})]})]}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs(D,{to:"/",className:"inline-flex items-center text-gray-500 hover:text-pink-500 text-sm font-medium transition-colors duration-200",children:[e.jsx("i",{className:"ri-arrow-left-line mr-2"}),"Back to BloodLink Home"]})})]})}),e.jsx(I,{})]})}export{J as default};
//# sourceMappingURL=page-D12tzNbF.js.map
