import{r as c,j as e,e as T,f as p,h as C,i as j,k as b,T as i}from"./index-BKgZRCvf.js";import{H as L,B as h,F as $}from"./Footer-BgyF9YbZ.js";import{C as r}from"./Card-BV6nY3lC.js";import{B as v}from"./Badge-DrLAeyKa.js";function H(){const[o,N]=c.useState("overview"),[f,y]=c.useState("7d"),d={totalBloodBanks:0,activeDonors:8392,completedDonations:12847,totalRevenue:2847392,pendingApprovals:0},[x,m]=c.useState([]),[g,u]=c.useState(!0),w=async()=>{u(!0);try{const s=T(p,"blood_banks"),n=(await C(s)).docs.map(t=>{const a=t.data();return{id:t.id,name:a.name||a.organizationName||a.title||"Unnamed",contactEmail:a.contactEmail||a.contactEmail||"",address:a.address||a.location||"",licenseNumber:a.licenseNumber||a.license||null,approved:!!a.approved,status:a.status||(a.approved?"approved":"pending"),createdAt:a.createdAt||a.createdAt||null,updatedAt:a.updatedAt||a.approvedAt||a.updatedAt||null,raw:a}});m(n)}catch(s){console.error("Failed to load blood banks",s)}finally{u(!1)}};c.useEffect(()=>{w()},[]);const k=[{type:"donation",user:"John Smith",bloodType:"O+",time:"2 hours ago",location:"City General"},{type:"request",user:"Sarah Johnson",bloodType:"A-",time:"3 hours ago",location:"Regional Medical"},{type:"approval",user:"Metro Hospital",action:"Blood bank approved",time:"5 hours ago"},{type:"donation",user:"Mike Brown",bloodType:"B+",time:"6 hours ago",location:"Community Center"}],A=[{name:"City General Blood Bank",donations:1247,revenue:156750,rating:4.9},{name:"Regional Medical Center",donations:1089,revenue:136125,rating:4.8},{name:"Metro Hospital",donations:892,revenue:111500,rating:4.7},{name:"Community Blood Services",donations:756,revenue:94500,rating:4.6}],B=[{type:"A+",total:1247,critical:23,percentage:15.2},{type:"A-",total:892,critical:18,percentage:10.9},{type:"B+",total:1089,critical:12,percentage:13.3},{type:"B-",total:567,critical:8,percentage:6.9},{type:"AB+",total:423,critical:15,percentage:5.2},{type:"AB-",total:234,critical:22,percentage:2.9},{type:"O+",total:1876,critical:5,percentage:22.9},{type:"O-",total:892,critical:31,percentage:10.9}],D=async s=>{try{console.debug("[Admin] approving bank id=",s);const l=j(p,"blood_banks",s);await b(l,{approved:!0,approvedAt:i.now(),status:"approved",updatedAt:i.now()}),m(n=>n.map(t=>t.id===s?{...t,approved:!0,status:"approved",updatedAt:i.now()}:t))}catch(l){console.error("Approve failed",l),alert("Failed to approve")}},R=async s=>{try{console.debug("[Admin] rejecting bank id=",s);const l=j(p,"blood_banks",s);await b(l,{status:"rejected",rejectedAt:i.now(),approved:!1,updatedAt:i.now()}),m(n=>n.map(t=>t.id===s?{...t,status:"rejected",updatedAt:i.now()}:t))}catch(l){console.error("Reject failed",l),alert("Failed to reject")}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-pink-50/30",children:[e.jsx(L,{}),e.jsx("section",{className:"bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex justify-between items-center mt-20",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Super Admin Dashboard"}),e.jsx("p",{className:"text-pink-100 text-lg",children:"Global platform management and analytics"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("select",{value:f,onChange:s=>y(s.target.value),className:"px-4 py-2 bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/70 focus:ring-2 focus:ring-white/50 pr-8",children:[e.jsx("option",{value:"24h",children:"Last 24 Hours"}),e.jsx("option",{value:"7d",children:"Last 7 Days"}),e.jsx("option",{value:"30d",children:"Last 30 Days"}),e.jsx("option",{value:"90d",children:"Last 90 Days"})]}),e.jsxs(h,{className:"bg-white text-pink-600 hover:bg-gray-50",children:[e.jsx("i",{className:"ri-download-line mr-2"}),"Export Report"]})]})]})})}),e.jsx("section",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-8",children:[{id:"overview",label:"Overview",icon:"ri-dashboard-line"},{id:"bloodbanks",label:"Blood Banks",icon:"ri-hospital-line"},{id:"inventory",label:"Global Inventory",icon:"ri-drop-line"},{id:"users",label:"Users & Donors",icon:"ri-user-line"},{id:"analytics",label:"Analytics",icon:"ri-bar-chart-line"}].map(s=>e.jsxs("button",{onClick:()=>N(s.id),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${o===s.id?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${s.icon} mr-2`}),s.label]},s.id))})})}),e.jsx("section",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[o==="overview"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsx(r,{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-pink-100 text-sm",children:"Total Blood Banks"}),e.jsx("p",{className:"text-3xl font-bold",children:d.totalBloodBanks})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-hospital-line text-2xl"})})]})}),e.jsx(r,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-purple-100 text-sm",children:"Active Donors"}),e.jsx("p",{className:"text-3xl font-bold",children:d.activeDonors.toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-user-heart-line text-2xl"})})]})}),e.jsx(r,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["$",(d.totalRevenue/1e6).toFixed(1),"M"]})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-2xl"})})]})}),e.jsx(r,{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Lives Saved"}),e.jsx("p",{className:"text-3xl font-bold",children:d.completedDonations.toLocaleString()})]}),e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-heart-pulse-line text-2xl"})})]})})]}),d.pendingApprovals>0,e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(r,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Activity"}),e.jsx("div",{className:"space-y-4",children:k.map((s,l)=>e.jsxs("div",{className:"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${s.type==="donation"?"bg-green-100":s.type==="request"?"bg-blue-100":"bg-purple-100"}`,children:e.jsx("i",{className:`${s.type==="donation"?"ri-heart-fill text-green-500":s.type==="request"?"ri-search-line text-blue-500":"ri-check-line text-purple-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.user}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.type==="donation"?`Donated ${s.bloodType}`:s.type==="request"?`Requested ${s.bloodType}`:s.action,s.location&&` at ${s.location}`]})]}),e.jsx("span",{className:"text-xs text-gray-500",children:s.time})]},l))})]}),e.jsxs(r,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Performing Blood Banks"}),e.jsx("div",{className:"space-y-4",children:A.map((s,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white font-bold text-sm",children:l+1}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.donations," donations"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-semibold text-gray-900",children:["$",s.revenue.toLocaleString()]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("i",{className:"ri-star-fill text-yellow-400 text-sm mr-1"}),e.jsx("span",{className:"text-sm text-gray-600",children:s.rating})]})]})]},l))})]})]})]}),o==="bloodbanks"&&e.jsx("div",{className:"space-y-8",children:e.jsxs(r,{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Blood Banks"}),e.jsxs(v,{variant:"warning",children:[x.filter(s=>s.status==="pending").length," Pending"]})]}),e.jsxs("div",{className:"space-y-4",children:[g&&e.jsx(r,{children:e.jsx("p",{className:"text-gray-600",children:"Loading blood banks..."})}),!g&&(()=>{const s=x.filter(t=>t.status==="pending"),l=x.filter(t=>t.status!=="pending").sort((t,a)=>{const S=t.updatedAt&&t.updatedAt.toDate?t.updatedAt.toDate().getTime():0;return(a.updatedAt&&a.updatedAt.toDate?a.updatedAt.toDate().getTime():0)-S});return[...s,...l].map(t=>e.jsx(r,{className:`border-l-4 ${t.status==="pending"?"border-l-yellow-500":t.status==="approved"?"border-l-green-500":"border-l-red-500"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:t.name}),e.jsx(v,{variant:t.status==="pending"?"warning":t.status==="approved"?"success":"danger",children:t.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("span",{className:"ml-1",children:t.address})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"License:"}),e.jsx("span",{className:"ml-1",children:t.licenseNumber||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Submitted:"}),e.jsx("span",{className:"ml-1",children:t.createdAt&&t.createdAt.toDate?t.createdAt.toDate().toLocaleString():"-"})]})]}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"font-medium text-sm text-gray-600",children:"Contact:"}),e.jsx("span",{className:"ml-1 text-sm text-gray-600",children:t.contactEmail})]})]}),e.jsxs("div",{className:"flex space-x-2 ml-4",children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>R(t.id),children:[e.jsx("i",{className:"ri-close-line mr-2"}),"Reject"]}),e.jsxs(h,{size:"sm",onClick:()=>D(t.id),className:"bg-green-500 hover:bg-green-600 text-white",children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Approve"]})]})]})},t.id))})()]})]})}),o==="inventory"&&e.jsx("div",{className:"space-y-8",children:e.jsxs(r,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Global Blood Inventory"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:B.map(s=>e.jsx(r,{className:"border-2 border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("span",{className:"text-2xl font-bold text-pink-600",children:s.type})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.total}),e.jsx("p",{className:"text-sm text-gray-600",children:"Total Units"})]}),e.jsx("div",{className:`p-2 rounded-lg ${s.critical>20?"bg-red-50 text-red-700":s.critical>10?"bg-yellow-50 text-yellow-700":"bg-green-50 text-green-700"}`,children:e.jsxs("p",{className:"text-sm font-medium",children:[s.critical," Critical Stock"]})}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-pink-500 h-2 rounded-full",style:{width:`${s.percentage}%`}})}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.percentage,"% of total"]})]})]})},s.type))})]})})]})}),e.jsx($,{})]})}export{H as default};
//# sourceMappingURL=page-BotTclkn.js.map
