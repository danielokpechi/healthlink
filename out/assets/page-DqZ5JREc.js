import{r as a,j as e,q as _,t as ue,d as B,v as he,l as b,e as h,x as X,o as C,i as U,n as pe,a as ge,u as fe,m as E,w as F,f as $,k as J,h as je,E as be,y as ye,z as Ne}from"./index-C6PY5QRv.js";import{B as y,H as ve,F as we}from"./Footer-BepvwvVu.js";import{C as d}from"./Card-D3mEm6qj.js";import{B as S}from"./Badge-B-7gq-4s.js";const ke=["A+","A-","B+","B-","AB+","AB-","O+","O-"];function Se({open:r,onClose:N,onCreate:D}){const[R,q]=a.useState(""),[T,n]=a.useState(1),[A,L]=a.useState(15e3),[m,x]=a.useState(!0),[p,i]=a.useState(!1);if(!r)return null;const j=async f=>{f.preventDefault(),i(!0);try{await D({type:R,quantity:T,price:A,available:m}),N()}finally{i(!1)}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:e.jsxs(d,{className:"w-full max-w-lg p-6 text-black shadow-2xl",children:[e.jsx("h3",{className:"text-xl font-bold mb-4",children:"Add Stock"}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Blood Type"}),e.jsxs("select",{className:"w-full input-glass p-3 rounded-xl",value:R,onChange:f=>q(f.target.value),required:!0,children:[e.jsx("option",{value:"",children:"Select blood type"}),ke.map(f=>e.jsx("option",{value:f,children:f},f))]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Quantity (pints)"}),e.jsx("input",{type:"number",min:0,value:T,onChange:f=>n(Number(f.target.value)),className:"w-full input-glass p-3 rounded-xl",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Price per Unit (₦)"}),e.jsx("input",{type:"number",min:0,step:500,value:A,onChange:f=>L(Number(f.target.value)),className:"w-full input-glass p-3 rounded-xl",required:!0})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium",children:"Available"}),e.jsx("button",{type:"button",onClick:()=>x(!m),className:`relative inline-flex h-6 w-11 items-center rounded-full ${m?"bg-pink-500":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white ${m?"translate-x-6":"translate-x-1"}`})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(y,{type:"button",variant:"outline",onClick:N,children:"Cancel"}),e.jsx(y,{type:"submit",disabled:p,children:p?"Saving…":"Add"})]})]})]})})}function Ce(r){const[N,D]=a.useState([]),[R,q]=a.useState(!0);return a.useEffect(()=>{if(!r)return;const m=_(B(h,"blood_banks",r,"inventory"),ue("__name__")),x=he(m,p=>{const i=p.docs.map(j=>({type:j.id,...j.data()}));D(i),q(!1)});return()=>x()},[r]),{items:N,loading:R,updateQuantity:async(m,x)=>{if(!r)return;const p=b(h,"blood_banks",r,"inventory",m);await C(p,{quantity:Math.max(0,Math.floor(x)),updatedAt:U()})},updatePrice:async(m,x)=>{if(!r)return;const p=b(h,"blood_banks",r,"inventory",m);await C(p,{price:Math.max(0,Math.floor(x)),updatedAt:U()})},toggleAvailability:async(m,x)=>{if(!r)return;const p=b(h,"blood_banks",r,"inventory",m);await C(p,{available:x,updatedAt:U()})},addStock:async(m,x)=>{if(!r)return;const p=b(h,"blood_banks",r,"inventory",m);await X(p,{...x,updatedAt:U()},{merge:!0})}}}function qe(){const[r,N]=a.useState("dashboard"),[D,R]=a.useState(!0),[q,T]=a.useState([]),[n,A]=a.useState(null),[L,m]=a.useState(!1),[x,p]=a.useState([]),[i,j]=a.useState(null),[f,I]=a.useState(""),[M,z]=a.useState(""),[G,H]=a.useState(""),{user:v}=pe(),O=ge(),{notify:w}=fe(),Z=v?.uid||v?.bloodBankId,{items:Q,updateQuantity:K,updatePrice:ee,toggleAvailability:se,addStock:te}=Ce(Z),[k,ae]=a.useState(null),[ne,re]=a.useState([]);a.useEffect(()=>{(async()=>{const t=J.currentUser;if(!t)return;const g=b(h,"users",t.uid),u=await E(g);if(u.exists()){const l=u.data();A(l?.uid),console.log("Fetched user data:",l)}})()},[]),a.useEffect(()=>{if(!v){setTimeout(()=>{window.localStorage.getItem("bloodlink_user")||O("/auth")},50);return}if((v.type||v.userType||"").toString().toLowerCase()!=="bloodbank"){O("/");return}R(!1)},[O]),a.useEffect(()=>{(async()=>{try{if(!n)return;const t=_(B(h,"donations"),F("location","==",n)),l=(await $(t)).docs.map(c=>{const o=c.data();return{id:c.id,fullName:o.fullName||"UNKNOWN",bloodType:o.bloodType||"UNKNOWN",phone:o.phone||"",donorEmail:o.donorEmail||"",requestTime:o.createdAt?o.createdAt.toDate().toLocaleString():"Unknown",status:o.status||"pending",preferredDate:o.preferredDate||"",emergencyContact:o.emergencyContact||"",lastDonation:o.lastDonation||"",notes:o.medicalHistory||"",preferredTime:o.preferredTime||""}}).sort((c,o)=>c.status==="pending"&&o.status!=="pending"?-1:c.status!=="pending"&&o.status==="pending"?1:0);T(l)}catch(t){console.error("Error fetching donations:",t)}})()},[n]),a.useEffect(()=>{(async()=>{try{if(!n)return;const t=_(B(h,"blood_requests"),F("location","==",n)),u=(await $(t)).docs.map(l=>{const c=l.data();return{id:l.id,patientName:c.patientName||"",bloodType:c.bloodType||"",quantity:Number(c.unitsNeeded)||0,urgency:c.urgency||"",totalCost:Number(c.totalAmount)||0,status:c.status||"pending",notes:c.additionalNotes||"",contactPhone:c.contactNumber||"",requestTime:c.createdAt?c.createdAt.toDate().toLocaleString():""}});p(u)}catch(t){console.log("Error fetching requests",t)}})()},[n]),a.useEffect(()=>{if(!n)return;const s=b(h,"revenue",n);E(s).then(t=>{t.exists()&&ae(t.data())})},[n,x]),a.useEffect(()=>{if(!n)return;const s=_(B(h,"transactions"),F("bloodBankId","==",n));$(s).then(t=>{const g=t.docs.map(u=>{const l=u.data();return{id:u.id,patient:l.patientName,bloodType:l.bloodType,amount:Number(l.amount),date:l.date?.toDate().toLocaleDateString(),status:l.status}});re(g)})},[n,x]),a.useEffect(()=>{(async()=>{if(!n)return;const t=b(h,"blood_banks",n),g=await E(t);g.exists()&&j(g.data())})()},[n]);const le=async s=>{try{const t=b(h,"donations",s);await C(t,{status:"completed",completedAt:new Date}),T(g=>g.map(u=>u.id===s?{...u,status:"completed"}:u)),w({type:"success",message:"Donation request completed successfully!"})}catch(t){console.error("Error completing donation:",t),w({type:"error",message:"Failed to complete donation request. Please try again."})}},ie=async s=>{try{const t=b(h,"blood_requests",s),g=await E(t);if(!g.exists())return;const u=g.data(),l=Number(u.totalAmount)||0;await C(t,{status:"completed",completedAt:new Date});const c=b(h,"revenue",n),o=await E(c);if(o.exists()){const P=o.data();await C(c,{totalRevenue:(P.totalRevenue||0)+l,monthlyRevenue:(P.monthlyRevenue||0)+l,weeklyRevenue:(P.weeklyRevenue||0)+l,completedTransactions:(P.completedTransactions||0)+1})}else await X(c,{totalRevenue:l,monthlyRevenue:l,weeklyRevenue:l,completedTransactions:1,pendingPayments:0});await je(B(h,"transactions"),{bloodBankId:n,facilityId:n,amount:l,patientName:u.patientName,bloodType:u.bloodType,date:new Date,status:"completed"}),p(P=>P.map(W=>W.id===s?{...W,status:"completed"}:W)),w({type:"success",message:"Blood request marked as completed & revenue updated!"})}catch(t){console.error("Error completing request:",t),w({type:"error",message:"Failed to complete blood request."})}},ce=async()=>{if(!n)return;const s=b(h,"blood_banks",n);await C(s,{name:i.name||"",licenseNumber:i.licenseNumber,address:i.address||"",contactEmail:i.contactEmail||"",contactPhone:i.contactPhone||""}),w({type:"success",message:"Profile updated successfully!"}),console.log("clicked")},oe=async()=>{try{if(M!==G){w({type:"error",message:"Passwords do not match"});return}const s=J.currentUser,t=be.credential(s.email,f);await ye(s,t),await Ne(s,M),w({type:"success",message:"Password updated successfully!"}),I(""),z(""),H("")}catch(s){console.log(s),w({type:"error",message:s.message||"Failed to update password."})}},de=s=>s===0?{level:"out",color:"danger"}:s<5?{level:"critical",color:"danger"}:s<10?{level:"low",color:"warning"}:{level:"good",color:"success"},V=s=>{if(!s)return{variant:"default",text:"UNKNOWN"};switch(s){case"emergency":return{variant:"danger",text:"EMERGENCY"};case"urgent":return{variant:"warning",text:"URGENT"};case"routine":return{variant:"success",text:"ROUTINE"};default:return{variant:"default",text:s.toUpperCase()}}},me=Q.reduce((s,t)=>s+t.quantity,0),xe=Q.filter(s=>s.quantity<5).length,Y=x.filter(s=>s.status==="pending").length;return D?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-pink-50/30 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-pink-500 to-purple-500 rounded-2xl flex items-center justify-center mx-auto mb-4 animate-pulse",children:e.jsx("i",{className:"ri-heart-pulse-fill text-white text-2xl"})}),e.jsx("p",{className:"text-gray-600",children:"Loading dashboard..."})]})}):v?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-pink-50/30",children:[e.jsx(ve,{}),e.jsx("section",{className:"bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white pt-20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Blood Bank Dashboard"}),e.jsxs("p",{className:"text-pink-100 text-lg",children:["Welcome back ",v.fullName||v.firstName,"! Manage your inventory, requests, and revenue."]})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs(y,{className:"bg-white/20 border border-white/30 text-white hover:bg-white/30",onClick:()=>m(!0),children:[e.jsx("i",{className:"ri-add-line mr-2"}),"Add Stock"]}),e.jsx(Se,{open:L,onClose:()=>m(!1),onCreate:async s=>{await te(s.type,{price:s.price,quantity:s.quantity,available:s.available})}})]})]})})}),e.jsx("section",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-3 md:flex md:space-x-8 gap-3 text-center",children:[{id:"dashboard",label:"Dashboard",icon:"ri-dashboard-line"},{id:"inventory",label:"Inventory",icon:"ri-drop-line"},{id:"requests",label:"Requests",icon:"ri-file-list-line"},{id:"donations",label:"Donations",icon:"ri-heart-line"},{id:"payments",label:"Payments",icon:"ri-money-dollar-circle-line"},{id:"account",label:"Account",icon:"ri-settings-line"}].map(s=>e.jsxs("button",{onClick:()=>N(s.id),className:`py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${r===s.id?"border-pink-500 text-pink-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[e.jsx("i",{className:`${s.icon} mr-2`}),s.label]},s.id))})})}),e.jsx("section",{className:"py-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r==="dashboard"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsx(d,{className:"bg-gradient-to-r from-pink-500 to-rose-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-drop-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-pink-100 text-sm",children:"Total Units"}),e.jsx("p",{className:"text-2xl font-bold",children:me})]})]})}),e.jsx(d,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-alert-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-yellow-100 text-sm",children:"Low Stock Items"}),e.jsx("p",{className:"text-2xl font-bold",children:xe})]})]})}),e.jsx(d,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-file-list-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-blue-100 text-sm",children:"Pending Requests"}),e.jsx("p",{className:"text-2xl font-bold",children:Y})]})]})}),e.jsx(d,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center mr-4",children:e.jsx("i",{className:"ri-money-dollar-circle-line text-white text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-green-100 text-sm",children:"Monthly Revenue"}),e.jsxs("p",{className:"text-2xl font-bold",children:["₦",k?.monthlyRevenue?.toLocaleString?.()||0]})]})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs(d,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recent Blood Requests"}),e.jsx("div",{className:"space-y-4",children:x.slice(0,3).map(s=>{const t=V(s.urgency);return e.jsxs("div",{className:"flex justify-between items-center p-4 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:s.patientName}),e.jsx(S,{variant:t.variant,children:t.text})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[s.bloodType," • ",s.quantity," pints • ₦",s.totalCost.toLocaleString()]})]}),e.jsx("div",{className:"text-right",children:e.jsx("p",{className:"text-xs text-gray-500",children:s.requestTime})})]},s.id)})}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(y,{variant:"outline",onClick:()=>N("requests"),className:"w-full",children:"View All Requests"})})]}),e.jsxs(d,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Revenue Overview"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsxs("p",{className:"text-2xl font-bold",children:["₦",k?.totalRevenue?.toLocaleString?.()||0]}),e.jsx("p",{className:"text-sm text-green-700",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("p",{className:"text-2xl font-bold",children:k?.completedTransactions||0}),e.jsx("p",{className:"text-sm text-blue-700",children:"Completed Orders"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"This Month"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["₦",k?.monthlyRevenue?.toLocaleString?.()||0]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"This Week"}),e.jsxs("span",{className:"font-semibold text-gray-900",children:["₦",k?.weeklyRevenue?.toLocaleString()||0]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"Pending Payments"}),e.jsx(S,{variant:"warning",children:Y})]})]})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx(y,{variant:"outline",onClick:()=>N("payments"),className:"w-full",children:"View Payment Details"})})]})]})]}),r==="inventory"&&e.jsxs(d,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Blood Inventory Management"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Blood Type"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Quantity"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Price per Pint"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Stock Level"}),e.jsx("th",{className:"text-left py-4 px-4 font-semibold text-gray-900",children:"Availability"})]})}),e.jsx("tbody",{children:Q.map(s=>{const t=de(s.quantity);return e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-10 h-10 bg-pink-100 rounded-full flex items-center justify-center mr-3",children:e.jsx("i",{className:"ri-drop-line text-pink-500"})}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.type})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{onClick:()=>K(s.type,s.quantity-1),className:"w-8 h-8 bg-gray-200 hover:bg-gray-300 rounded-full flex items-center justify-center cursor-pointer",children:e.jsx("i",{className:"ri-subtract-line text-sm"})}),e.jsx("span",{className:"w-12 text-center font-medium",children:s.quantity}),e.jsx("button",{onClick:()=>K(s.type,s.quantity+1),className:"w-8 h-8 bg-pink-500 hover:bg-pink-600 text-white rounded-full flex items-center justify-center cursor-pointer",children:e.jsx("i",{className:"ri-add-line text-sm"})})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"mr-2",children:"₦"}),e.jsx("input",{type:"number",value:s.price,onChange:g=>ee(s.type,Number(g.target.value)),className:"w-20 px-2 py-1 border border-gray-300 rounded focus:ring-2 focus:ring-pink-500 focus:border-pink-500 text-sm",min:"0",step:"1000"})]})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx(S,{variant:t.color,children:t.level==="out"?"Out of Stock":t.level==="critical"?"Critical":t.level==="low"?"Low Stock":"Good Stock"})}),e.jsx("td",{className:"py-4 px-4",children:e.jsx("button",{onClick:()=>se(s.type,!s.available),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors cursor-pointer ${s.available?"bg-pink-500":"bg-gray-300"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${s.available?"translate-x-6":"translate-x-1"}`})})})]},s.type)})})]})})]}),r==="requests"&&e.jsxs(d,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Blood Requests Management"})}),e.jsx("div",{className:"space-y-4",children:x.map(s=>{const t=V(s.urgency);return e.jsx(d,{className:"border-l-4 border-l-pink-500",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-start gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:s.patientName}),e.jsx(S,{variant:t.variant,children:t.text}),e.jsx(S,{variant:s.status==="pending"?"warning":s.status==="completed"?"success":"default",children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Blood Type:"}),e.jsx("span",{className:"ml-1 font-semibold text-pink-600",children:s.bloodType})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Quantity:"}),e.jsxs("span",{className:"ml-1",children:[s.quantity," pints"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Cost:"}),e.jsxs("span",{className:"ml-1 font-semibold text-green-600",children:["₦",s.totalCost.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Requested:"}),e.jsx("span",{className:"ml-1",children:s.requestTime})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600 mb-3",children:e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"}),e.jsx("span",{className:"ml-1",children:s.contactPhone})]})}),s.notes&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Notes:"}),e.jsx("span",{className:"ml-1",children:s.notes})]})]}),s.status==="pending"&&e.jsx("div",{className:"flex space-x-2 ml-4",children:e.jsxs(y,{size:"sm",className:"bg-green-500 hover:bg-green-600 text-white",onClick:()=>ie(s.id),children:[e.jsx("i",{className:"ri-check-line mr-2"}),"Complete"]})})]})},s.id)})})]}),r==="donations"&&e.jsxs(d,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Donation Requests"}),e.jsx("div",{className:"space-y-4",children:q.map(s=>e.jsx(d,{className:"border-l-4 border-l-pink-500",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[e.jsx("h3",{className:"font-semibold text-gray-900 text-lg",children:s.fullName}),e.jsx(S,{variant:s.status==="pending"?"warning":"success",children:s.status.toUpperCase()})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Blood Type:"})," ",s.bloodType]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:["Emergency Contact: ",e.jsx("br",{})," "]})," ",s.emergencyContact," "]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:["Preferred Date: ",e.jsx("br",{})," "]})," ",s.preferredDate]}),e.jsxs("div",{children:[e.jsxs("span",{className:"font-medium",children:["Requested: ",e.jsx("br",{})," "]})," ",s.requestTime]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-gray-600 mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",s.phone]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.donorEmail]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Last Donation:"})," ",s.lastDonation]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Preferred Time:"})," ",s.preferredTime]})]}),s.notes&&e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Notes:"})," ",s.notes]})]}),s.status==="pending"&&e.jsx("div",{className:"flex space-x-2 ml-4",children:e.jsxs(y,{size:"sm",className:"bg-green-500 hover:bg-green-600 text-white",onClick:()=>le(s.id),children:[e.jsx("i",{className:"ri-check-line mr-2"})," Complete"]})})]})},s.id))})]}),r==="payments"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsx(d,{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white border-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-green-100 text-sm mb-2",children:"Total Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["₦",k?.totalRevenue?.toLocaleString()||0]}),e.jsx("p",{className:"text-green-100 text-xs mt-1",children:"All time"})]})}),e.jsx(d,{className:"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-blue-100 text-sm mb-2",children:"Monthly Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["₦",k?.monthlyRevenue?.toLocaleString()||0]}),e.jsx("p",{className:"text-blue-100 text-xs mt-1",children:"This month"})]})}),e.jsx(d,{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-purple-100 text-sm mb-2",children:"Weekly Revenue"}),e.jsxs("p",{className:"text-3xl font-bold",children:["₦",k?.weeklyRevenue?.toLocaleString()||0]}),e.jsx("p",{className:"text-purple-100 text-xs mt-1",children:"This week"})]})})]}),e.jsxs(d,{children:[e.jsx("div",{className:"flex justify-between items-center mb-6",children:e.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Recent Transactions"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-gray-200",children:[e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Patient"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Blood Type"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Amount"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Date"}),e.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Status"})]})}),e.jsx("tbody",{children:ne.map(s=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-4 font-medium text-gray-900",children:s.patient}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"inline-flex items-center px-2 py-1 bg-pink-100 text-pink-700 rounded-full text-sm",children:s.bloodType})}),e.jsxs("td",{className:"py-3 px-4 font-semibold text-green-600",children:["₦",s.amount.toLocaleString()]}),e.jsx("td",{className:"py-3 px-4 text-gray-600",children:s.date}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(S,{variant:s.status==="completed"?"success":"warning",children:s.status.toUpperCase()})}),e.jsx("td",{className:"py-3 px-4"})]},s.id))})]})})]})]}),r==="account"&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs(d,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Blood Bank Profile"}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Blood Bank Name"}),e.jsx("input",{type:"text",value:i?.name||"",onChange:s=>j({...i,name:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"License Number"}),e.jsx("input",{type:"text",value:i?.licenseNumber??"",onChange:s=>j({...i,licenseNumber:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Address"}),e.jsx("textarea",{rows:3,value:i?.address||"",onChange:s=>j({...i,address:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),e.jsx("input",{type:"email",value:i?.contactEmail||"",onChange:s=>j({...i,contactEmail:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),e.jsx("input",{type:"tel",value:i?.contactPhone||"",onChange:s=>j({...i,contactPhone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]})]}),e.jsx("div",{className:"flex justify-end space-x-4",children:e.jsx(y,{type:"button",className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600",onClick:ce,children:"Save Changes"})})]})]}),e.jsxs(d,{children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Security Settings"}),e.jsxs("form",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Password"}),e.jsx("input",{type:"password",value:f,onChange:s=>I(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Password"}),e.jsx("input",{type:"password",value:M,onChange:s=>z(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm New Password"}),e.jsx("input",{type:"password",value:G,onChange:s=>H(s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-pink-500 focus:border-pink-500"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(y,{type:"button",className:"bg-gradient-to-r from-pink-500 to-rose-500 hover:from-pink-600 hover:to-rose-600",onClick:oe,children:"Update Password"})})]})]})]})]})}),e.jsx(we,{})]}):null}export{qe as default};
//# sourceMappingURL=page-DqZ5JREc.js.map
