{"version":3,"file":"page-oy4ispwz.js","sources":["../../src/pages/admin/dashboard/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport Header from '../../../components/feature/Header';\nimport Footer from '../../../components/feature/Footer';\nimport Button from '../../../components/base/Button';\nimport Card from '../../../components/base/Card';\nimport Badge from '../../../components/base/Badge';\nimport { collection, getDocs, updateDoc, doc, Timestamp, onSnapshot, query, where } from 'firebase/firestore';\nimport { db } from '../../../firebase/index';\n\nexport default function AdminDashboard() {\n  const [activeTab, setActiveTab] = useState('overview');\n\n  const [globalStats, setGlobalStats] = useState({\n    totalBloodBanks: 0,\n    approvedBanks: 0,\n    pendingBanks: 0,\n    rejectedBanks: 0,\n    activeDonors: 0,\n    totalRequests: 0,\n    completedDonations: 0,\n    totalRevenue: 0,\n    pendingApprovals: 0,\n  });\n\n  const [bloodBanks, setBloodBanks] = useState<any[]>([]);\n  const [loadingBanks, setLoadingBanks] = useState(true);\n  const [recentActivity, setRecentActivity] = useState<any[]>([]);\n  const [topBloodBanks, setTopBloodBanks] = useState<any[]>([]);\n  const [inventoryOverview, setInventoryOverview] = useState<any[]>([]);\n  const [showModal, setShowModal] = useState(false);\n  const [selectedAction, setSelectedAction] = useState<\"approve\" | \"reject\" | null>(null);\n  const [selectedBankId, setSelectedBankId] = useState<string | null>(null);\n  const [users, setUsers] = useState<any[]>([]);\n  const [loadingUsers, setLoadingUsers] = useState(true);\n\n  async function makeSuperAdmin(id: string) {\n    try {\n      const userRef = doc(db, \"users\", id);\n      await updateDoc(userRef, { userType: \"superAdmin\" });\n\n      setUsers(prev =>\n        prev.map(u => (u.id === id ? { ...u, userType: \"superAdmin\" } : u))\n      );\n    } catch (err) {\n      console.error(\"Failed to make super admin\", err);\n    }\n  }\n\n  async function removeSuperAdmin(id: string) {\n    try {\n      const userRef = doc(db, \"users\", id);\n      await updateDoc(userRef, { userType: \"donor\" });\n\n      // instantly reflect change in UI\n      setUsers(prev =>\n        prev.map(u => (u.id === id ? { ...u, userType: \"donor\" } : u))\n      );\n    } catch (err) {\n      console.error(\"Failed to remove super admin\", err);\n    }\n  }\n\n  const confirmAction = (id: string, action: \"approve\" | \"reject\") => {\n    setSelectedBankId(id);\n    setSelectedAction(action);\n    setShowModal(true);\n  };\n\n  const handleConfirm = async () => {\n    if (!selectedBankId || !selectedAction) return;\n    setShowModal(false);\n    if (selectedAction === \"approve\") await handleApproveBloodBank(selectedBankId);\n    if (selectedAction === \"reject\") await handleRejectBloodBank(selectedBankId);\n\n    setSelectedBankId(null);\n    setSelectedAction(null);\n\n  };\n\n  const loadBloodBanks = async () => {\n    setLoadingBanks(true);\n    try {\n      const q = collection(db, 'blood_banks');\n      const snap = await getDocs(q);\n      const items = snap.docs.map(d => {\n        const data = d.data() as any;\n        return {\n          id: d.id,\n          name: data.name || data.organizationName || data.title || 'Unnamed',\n          contactEmail: data.contactEmail || '',\n          address: data.address || data.location || '',\n          licenseNumber: data.licenseNumber || null,\n          approved: !!data.approved,\n          status: data.status || (data.approved ? 'approved' : 'pending'),\n          createdAt: data.createdAt || null,\n          updatedAt: data.updatedAt || data.approvedAt || null,\n          raw: data\n        };\n      });\n      setBloodBanks(items);\n    } catch (e) {\n      console.error('Failed to load blood banks', e);\n    } finally {\n      setLoadingBanks(false);\n    }\n  };\n\n  const loadGlobalStats = async () => {\n    try {\n      const banksSnap = await getDocs(collection(db, 'blood_banks'));\n      const banks = banksSnap.docs.map(d => d.data() as any);\n      const totalBloodBanks = banks.length;\n      const approvedBanks = banks.filter(b => b.approved).length;\n      const pendingBanks = banks.filter(b => b.status === 'pending').length;\n      const rejectedBanks = banks.filter(b => b.status === 'rejected').length;\n      const pendingApprovals = banks.filter(b => b.status === 'pending').length;\n\n      const usersSnap = await getDocs(collection(db, 'users'));\n      const users = usersSnap.docs.map(d => d.data() as any);\n      const activeDonors = users.filter(u => (u.userType || '').toLowerCase() === 'donor').length;\n\n      const requestsSnap = await getDocs(collection(db, 'requests'));\n      const totalRequests = requestsSnap.size;\n\n      const donationsSnap = await getDocs(collection(db, 'donations'));\n      const donations = donationsSnap.docs.map(d => d.data() as any);\n      const completedDonations = donations.filter(d => d.status === 'completed').length;\n\n      const transSnap = await getDocs(collection(db, \"transactions\"));\n      let totalRevenue = 0;\n      transSnap.forEach(d => {\n        totalRevenue += d.data().amount || 0;\n      });\n\n      setGlobalStats({\n        totalBloodBanks,\n        approvedBanks,\n        pendingBanks,\n        rejectedBanks,\n        activeDonors,\n        totalRequests,\n        completedDonations,\n        totalRevenue,\n        pendingApprovals\n      });\n    } catch (e) {\n      console.error('Failed to load global stats', e);\n    }\n  };\n\nconst loadRecentActivity = async () => {\n  try {\n    const reqSnap = await getDocs(collection(db, 'requests'));\n    const donationSnap = await getDocs(collection(db, 'donations'));\n    const bankSnap = await getDocs(collection(db, 'blood_banks'));\n\n    // Map requests\n    const reqs = reqSnap.docs.map(d => {\n      const data = d.data() as any;\n      return {\n        type: 'request',\n        timestamp: data.updatedAt || data.createdAt,\n        action: `Requested ${data.bloodType || ''}`,\n        ...data,\n      };\n    });\n\n    // Map donations\n    const dons = donationSnap.docs.map(d => {\n      const data = d.data() as any;\n      return {\n        type: 'donation',\n        timestamp: data.updatedAt || data.createdAt,\n        action: `Donated ${data.bloodType || ''}`,\n        ...data,\n      };\n    });\n\n    // Map bank approvals & rejections\n    const approvalsAndRejections = bankSnap.docs\n      .map(d => {\n        const data = d.data() as any;\n\n        const latestTime = [data.updatedAt, data.approvedAt, data.rejectedAt]\n          .filter(Boolean)\n          .map(t => (t?.toDate ? t.toDate() : new Date(t)))\n          .sort((a, b) => b.getTime() - a.getTime())[0];\n\n        if (!latestTime) return null;\n\n        if (data.status === 'approved') {\n          return {\n            type: 'approval',\n            timestamp: data.updatedAt || data.approvedAt,\n            action: 'Blood bank approved',\n            name: data.name,\n            ...data,\n          };\n        }\n\n        if (data.status === 'rejected') {\n          return {\n            type: 'rejection',\n            timestamp: data.updatedAt || data.rejectedAt,\n            action: 'Blood bank rejected',\n            name: data.name,\n            ...data,\n          };\n        }\n\n        return null;\n      })\n      .filter(Boolean) as any[];\n\n    const combined = [...reqs, ...dons, ...approvalsAndRejections]\n      .sort((a, b) => {\n        const aTime = a.timestamp?.toDate\n          ? a.timestamp.toDate().getTime()\n          : a.timestamp instanceof Date\n          ? a.timestamp.getTime()\n          : 0;\n        const bTime = b.timestamp?.toDate\n          ? b.timestamp.toDate().getTime()\n          : b.timestamp instanceof Date\n          ? b.timestamp.getTime()\n          : 0;\n        return bTime - aTime;\n      })\n      .slice(0, 5);\n\n    console.log(\"Recent activity combined:\", combined);\n    setRecentActivity(combined);\n  } catch (e) {\n    console.error('Failed to load recent activity', e);\n  }\n};\n\n  const loadTopBloodBanks = async () => {\n    const banksSnap = await getDocs(collection(db, 'blood_banks'));\n\n    const banks:any[] = [];\n\n    for (const bankDoc of banksSnap.docs) {\n      const bankId = bankDoc.id;\n      const bankData = bankDoc.data() as any;\n      const transQuery = query(collection(db, \"transactions\"), where(\"bloodBankId\", \"==\", bankId));\n      const transSnap = await getDocs(transQuery);\n\n      let totalRevenue = 0;\n      transSnap.forEach(r => {\n        totalRevenue += r.data().amount || 0;\n      });\n\n      // get donation count\n      const donationQuery = query(collection(db, \"donations\"), where(\"location\", \"==\", bankId));\n      const donationSnap = await getDocs(donationQuery);\n      const donationCount = donationSnap.size;\n\n      banks.push({\n        id: bankId,\n        name: bankData.name,\n        revenue: totalRevenue,\n        donations: donationCount\n      });\n    }\n\n    // sort rank\n    const sorted = banks.sort((a, b) => b.revenue - a.revenue).slice(0, 5);\n\n    setTopBloodBanks(sorted);\n  };\n\n  const loadInventory = async () => {\n    try {\n      const banksSnap = await getDocs(collection(db, 'blood_banks'));\n      const totals: Record<string, { total: number; critical: number }> = {};\n\n      banksSnap.forEach(doc => {\n        const data: any = doc.data();\n        if (data.inventory) {\n          for (const type in data.inventory) {\n            const inv = data.inventory[type];\n            if (!totals[type]) totals[type] = { total: 0, critical: 0 };\n            totals[type].total += inv.quantity;\n            if (inv.quantity < 20) totals[type].critical += 1;\n          }\n        }\n      });\n\n      const grandTotal = Object.values(totals).reduce((sum, t) => sum + t.total, 0);\n      const overview = Object.keys(totals).map(type => {\n        const total = totals[type].total;\n        return {\n          type,\n          total,\n          critical: totals[type].critical,\n          percentage: grandTotal ? Math.round((total / grandTotal) * 100) : 0\n        };\n      });\n\n      setInventoryOverview(overview);\n    } catch (e) {\n      console.error('Failed to load inventory', e);\n    }\n  };\n\n  const loadUsers = async () => {\n    setLoadingUsers(true);\n    try {\n      const snap = await getDocs(collection(db, \"users\"));\n      const items = snap.docs.map((d) => {\n        const data = d.data() as any;\n\n        const role = data.userType || \"donor\"; // keep exact case\n\n        return {\n          id: d.id,\n          name: data.name || data.fullName || \"Unnamed User\",\n          email: data.email || \"\",\n          userType: role,\n          phone: data.phone || \"\",\n          createdAt: data.createdAt || null,\n          lastActive: data.lastActive || data.updatedAt || null,\n        };\n      });\n\n      // Include your defined roles\n      const filtered = items.filter((u) =>\n        [\"user\", \"donor\", \"superAdmin\"].includes(u.userType)\n      );\n\n      const sorted = filtered.sort((a, b) => {\n        const aTime = a.createdAt?.toDate\n          ? a.createdAt.toDate().getTime()\n          : 0;\n        const bTime = b.createdAt?.toDate\n          ? b.createdAt.toDate().getTime()\n          : 0;\n        return bTime - aTime;\n      });\n\n      setUsers(sorted);\n    } catch (e) {\n      console.error(\"Failed to load users\", e);\n    } finally {\n      setLoadingUsers(false);\n    }\n  };\n\n  useEffect(() => {\n    loadGlobalStats();\n    loadBloodBanks();\n    loadRecentActivity();\n    loadTopBloodBanks();\n    loadInventory();\n    loadUsers();\n  }, []);\n\n  useEffect(() => {\n  const q = collection(db, \"blood_banks\");\n  const unsub = onSnapshot(q, (snap) => {\n    const items = snap.docs.map((d) => {\n      const data = d.data() as any;\n      return {\n        id: d.id,\n        name: data.name || data.organizationName || data.title || \"Unnamed\",\n        contactEmail: data.contactEmail || \"\",\n        address: data.address || data.location || \"\",\n        licenseNumber: data.licenseNumber || null,\n        approved: !!data.approved,\n        status: data.status || (data.approved ? \"approved\" : \"pending\"),\n        createdAt: data.createdAt || null,\n        updatedAt: data.updatedAt || data.approvedAt || null,\n        raw: data,\n      };\n    });\n    setBloodBanks(items);\n  });\n\n  return () => unsub(); \n}, []);\n\n  const handleApproveBloodBank = async (id: string) => {\n    try {\n      const bankRef = doc(db, 'blood_banks', id);\n      const now = Timestamp.now();\n      await updateDoc(bankRef, {\n        approved: true,\n        approvedAt: now,\n        status: 'approved',\n        updatedAt: now,\n        rejectedAt: null \n      });\n\n      await loadGlobalStats();\n      await loadRecentActivity();\n      await loadTopBloodBanks();\n    } catch (e) {\n      console.error('Approve failed', e);\n    }\n  };\n\n  const handleRejectBloodBank = async (id: string) => {\n    try {\n      const bankRef = doc(db, 'blood_banks', id);\n      const now = Timestamp.now();\n      await updateDoc(bankRef, {\n        approved: false,\n        rejectedAt: now,\n        status: 'rejected',\n        updatedAt: now,\n        approvedAt: null \n      });\n\n      await loadGlobalStats();\n      await loadRecentActivity();\n      await loadTopBloodBanks();\n    } catch (e) {\n      console.error('Reject failed', e);\n    }\n  };\n\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-pink-50/30\">\n      <Header />\n\n      <section className=\"bg-gradient-to-r from-pink-500 via-purple-500 to-blue-500 text-white\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n          <div className=\"flex justify-between items-center mt-20\">\n            <div>\n              <h1 className=\"text-4xl font-bold mb-2\">Super Admin Dashboard</h1>\n              <p className=\"text-pink-100 text-lg\">Global platform management and analytics</p>\n            </div>\n          </div>\n        </div>\n      </section>\n\n      <section className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex space-x-8\">\n            {[\n              { id: 'overview', label: 'Overview', icon: 'ri-dashboard-line' },\n              { id: 'bloodbanks', label: 'Blood Banks', icon: 'ri-hospital-line' },\n              { id: 'users', label: 'Users', icon: 'ri-user-line' },\n            ].map((tab) => (\n              <button\n                key={tab.id}\n                onClick={() => setActiveTab(tab.id)}\n                className={`py-4 px-2 border-b-2 font-medium text-sm transition-colors duration-200 whitespace-nowrap ${\n                  activeTab === tab.id\n                    ? 'border-pink-500 text-pink-600'\n                    : 'border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300'\n                }`}\n              >\n                <i className={`${tab.icon} mr-2`}></i>\n                {tab.label}\n              </button>\n            ))}\n          </div>\n        </div>\n      </section>\n\n      <section className=\"py-8\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n\n          {/* Overview */}\n          {activeTab === 'overview' && (\n            <div className=\"space-y-8\">\n              {/* Stats */}\n              <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                <Card className=\"bg-gradient-to-r from-pink-500 to-rose-500 text-white border-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-pink-100 text-sm\">Approved Blood Banks</p>\n                      <p className=\"text-3xl font-bold\">{globalStats.approvedBanks}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                      <i className=\"ri-hospital-line text-2xl\"></i>\n                    </div>\n                  </div>\n                </Card>\n\n                <Card className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-purple-100 text-sm\">Active Donors</p>\n                      <p className=\"text-3xl font-bold\">{globalStats.activeDonors.toLocaleString()}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                      <i className=\"ri-user-heart-line text-2xl\"></i>\n                    </div>\n                  </div>\n                </Card>\n\n                <Card className=\"bg-gradient-to-r from-blue-500 to-purple-500 text-white border-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-blue-100 text-sm\">Total Revenue</p>\n                      <p className=\"text-3xl font-bold\">₦{globalStats.totalRevenue.toLocaleString()}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                      <i className=\"ri-money-dollar-circle-line text-2xl\"></i>\n                    </div>\n                  </div>\n                </Card>\n\n                <Card className=\"bg-gradient-to-r from-green-500 to-blue-500 text-white border-0\">\n                  <div className=\"flex items-center justify-between\">\n                    <div>\n                      <p className=\"text-green-100 text-sm\">Completed Donations</p>\n                      <p className=\"text-3xl font-bold\">{globalStats.completedDonations.toLocaleString()}</p>\n                    </div>\n                    <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                      <i className=\"ri-heart-pulse-line text-2xl\"></i>\n                    </div>\n                  </div>\n                </Card>\n              </div>\n\n              {/* Pending */}\n              {globalStats.pendingApprovals > 0 && (\n                <Card className=\"border-l-4 border-l-yellow-500 bg-yellow-50\">\n                  <div className=\"flex items-center justify-between\">\n                    <div className=\"flex items-center\">\n                      <i className=\"ri-alert-line text-yellow-500 text-xl mr-3\"></i>\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900\">Pending Blood Bank Approvals</h3>\n                        <p className=\"text-gray-600\">{globalStats.pendingApprovals} blood banks awaiting approval</p>\n                      </div>\n                    </div>\n                    <Button onClick={() => setActiveTab('bloodbanks')} className=\"bg-yellow-500 hover:bg-yellow-600 text-white\">\n                      Review Now\n                    </Button>\n                  </div>\n                </Card>\n              )}\n\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                <Card>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Recent Activity</h3>\n                  <div className=\"space-y-4\">\n                    {recentActivity.map((activity, index) => (\n                      <div key={index} className=\"flex items-center space-x-4 p-3 bg-gray-50 rounded-lg\">\n                        <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                          activity.type === 'donation' ? 'bg-green-100' :\n                          activity.type === 'request' ? 'bg-blue-100' :\n                          activity.type === 'approval' ? 'bg-purple-100' :\n                          activity.type === 'rejection' ? 'bg-red-100' : 'bg-gray-100'\n                        }`}>\n                          <i className={`${\n                            activity.type === 'donation' ? 'ri-heart-fill text-green-500' :\n                            activity.type === 'request' ? 'ri-search-line text-blue-500' :\n                            activity.type === 'approval' ? 'ri-check-line text-purple-500' :\n                            activity.type === 'rejection' ? 'ri-close-line text-red-500' : 'ri-information-line text-gray-500'\n                          }`}></i>\n                        </div>\n\n                        <div className=\"flex-1\">\n                          <p className=\"font-medium text-gray-900\">{activity.user || activity.name}</p>\n                          <p className=\"text-sm text-gray-600\">\n                            {activity.type === 'donation'\n                              ? `Donated ${activity.bloodType}`\n                              : activity.type === 'request'\n                              ? `Requested ${activity.bloodType}`\n                              : activity.type === 'approval'\n                              ? 'Blood bank approved'\n                              : activity.type === 'rejection'\n                              ? 'Blood bank rejected'\n                              : activity.action || 'Activity'}\n                          </p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </Card>\n\n                <Card>\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Top Performing Blood Banks</h3>\n                  <div className=\"space-y-4\">\n                    {topBloodBanks.map((bank, index) => (\n                      <div key={index} className=\"flex items-center justify-between p-3 bg-gray-50 rounded-lg\">\n                        <div className=\"flex items-center space-x-3\">\n                          <div className=\"w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white font-bold text-sm\">\n                            {index + 1}\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-gray-900\">{bank.name}</p>\n                            <p className=\"text-sm text-gray-600\">{bank.donations} donations</p>\n                          </div>\n                        </div>\n                        <div className=\"text-right\">\n                          <p className=\"font-semibold text-gray-900\">₦{bank.revenue.toLocaleString()}</p>\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </Card>\n              </div>\n            </div>\n          )}\n\n          {/* Blood Banks */}\n          {activeTab === 'bloodbanks' && (\n            <div className=\"space-y-8\">\n              {/* Blood Bank Status Breakdown */}\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6\">\n                  <Card className=\"bg-gradient-to-r from-purple-500 to-pink-500 text-white border-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-white text-sm\">Total Blood Banks</p>\n                        <p className=\"text-2xl font-bold\">{globalStats.totalBloodBanks}</p>\n                      </div>\n                      <i className=\"ri-hospital-line text-2xl text-white\"></i>\n                    </div>\n                  </Card>\n\n                  <Card className=\"bg-gradient-to-r from-green-500 to-blue-500 text-white border-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-white text-sm\">Approved</p>\n                        <p className=\"text-2xl font-bold text-white\">{globalStats.approvedBanks}</p>\n                      </div>\n                      <i className=\"ri-check-line text-2xl text-white\"></i>\n                    </div>\n                  </Card>\n\n                  <Card className=\"bg-gradient-to-r from-yellow-400 to-yellow-500 text-white border-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-white text-sm\">Pending</p>\n                        <p className=\"text-2xl font-bold text-white\">{globalStats.pendingBanks}</p>\n                      </div>\n                      <i className=\"ri-time-line text-2xl text-white\"></i>\n                    </div>\n                  </Card>\n\n                  <Card className=\"bg-gradient-to-r from-pink-500 to-rose-500 text-white border-0\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <p className=\"text-white text-sm\">Rejected</p>\n                        <p className=\"text-2xl font-bold text-white\">{globalStats.rejectedBanks}</p>\n                      </div>\n                      <i className=\"ri-close-line text-2xl text-white\"></i>\n                    </div>\n                  </Card>\n                </div>\n\n              <Card>\n                <div className=\"flex justify-between items-center mb-6\">\n                  <h3 className=\"text-xl font-semibold text-gray-900\">Blood Banks</h3>\n                  <Badge variant=\"warning\">{bloodBanks.filter(b => b.status === 'pending').length} Pending</Badge>\n                </div>\n\n                <div className=\"space-y-4\">\n                  {loadingBanks && <p className=\"text-gray-600\">Loading blood banks...</p>}\n\n                  {!loadingBanks && (() => {\n                    const pending = bloodBanks.filter(b => b.status === 'pending');\n                    const others = bloodBanks.filter(b => b.status !== 'pending')\n                      .sort((a, b) => {\n                        const aDate = a.updatedAt?.toDate ? a.updatedAt.toDate().getTime() : 0;\n                        const bDate = b.updatedAt?.toDate ? b.updatedAt.toDate().getTime() : 0;\n                        return bDate - aDate;\n                      });\n                    const ordered = [...pending, ...others];\n\n                    return ordered.map((application) => (\n                      <Card key={application.id} className={`border-l-4 ${application.status === 'pending'\n                          ? 'border-l-yellow-500'\n                          : application.status === 'approved'\n                            ? 'border-l-green-500'\n                            : 'border-l-red-500'}`}>\n                        <div className=\"flex justify-between items-start\">\n                          <div className=\"flex-1\">\n                            <div className=\"flex items-center space-x-3 mb-2\">\n                              <h4 className=\"text-lg font-semibold text-gray-900\">{application.name}</h4>\n                              <Badge variant={application.status === 'pending'\n                                  ? 'warning'\n                                  : application.status === 'approved'\n                                    ? 'success'\n                                    : 'danger'}>\n                                {application.status.toUpperCase()}\n                              </Badge>\n                            </div>\n\n                            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm text-gray-600\">\n                              <div><span className=\"font-medium\">Location:</span> {application.address}</div>\n                              <div><span className=\"font-medium\">License:</span> {application.licenseNumber || '-'}</div>\n                              <div><span className=\"font-medium\">Submitted:</span> {application.createdAt?.toDate ? application.createdAt.toDate().toLocaleString() : '-'}</div>\n                            </div>\n\n                            <div className=\"mt-2 text-sm text-gray-600\">\n                              <span className=\"font-medium\">Contact:</span> {application.contactEmail}\n                            </div>\n                          </div>\n\n                          <div className=\"flex space-x-2 ml-4\">\n                            {application.status === \"pending\" && (\n                              <>\n                                <Button\n                                  size=\"sm\"\n                                  variant=\"outline\"\n                                  onClick={() => confirmAction(application.id, \"reject\")}\n                                >\n                                  <i className=\"ri-close-line mr-2\"></i>\n                                  Reject\n                                </Button>\n                                <Button\n                                  size=\"sm\"\n                                  onClick={() => confirmAction(application.id, \"approve\")}\n                                  className=\"bg-green-500 hover:bg-green-600 text-white\"\n                                >\n                                  <i className=\"ri-check-line mr-2\"></i>\n                                  Approve\n                                </Button>\n                              </>\n                            )}\n\n                            {application.status === \"approved\" && (\n                              <Button\n                                size=\"sm\"\n                                variant=\"outline\"\n                                onClick={() => confirmAction(application.id, \"reject\")}\n                              >\n                                <i className=\"ri-close-line mr-2\"></i>\n                                Reject\n                              </Button>\n                            )}\n\n                            {application.status === \"rejected\" && (\n                              <Button\n                                size=\"sm\"\n                                onClick={() => confirmAction(application.id, \"approve\")}\n                                className=\"bg-green-500 hover:bg-green-600 text-white\"\n                              >\n                                <i className=\"ri-check-line mr-2\"></i>\n                                Approve\n                              </Button>\n                            )}\n                          </div>\n                        </div>\n                      </Card>\n                    ));\n                  })()}\n                </div>\n              </Card>\n            </div>\n          )}\n\n          {/* Inventory */}\n          {activeTab === 'inventory' && (\n            <div className=\"space-y-8\">\n              <Card>\n                <h3 className=\"text-xl font-semibold text-gray-900 mb-6\">Global Blood Inventory</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n                  {inventoryOverview.map((blood) => (\n                    <Card key={blood.type} className=\"border-2 border-gray-100\">\n                      <div className=\"text-center\">\n                        <div className=\"w-16 h-16 bg-pink-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                          <span className=\"text-2xl font-bold text-pink-600\">{blood.type}</span>\n                        </div>\n                        <div className=\"space-y-2\">\n                          <div>\n                            <p className=\"text-2xl font-bold text-gray-900\">{blood.total}</p>\n                            <p className=\"text-sm text-gray-600\">Total Units</p>\n                          </div>\n                          <div className={`p-2 rounded-lg ${\n                            blood.critical > 20 ? 'bg-red-50 text-red-700'\n                              : blood.critical > 10 ? 'bg-yellow-50 text-yellow-700'\n                                : 'bg-green-50 text-green-700'}`}>\n                            <p className=\"text-sm font-medium\">{blood.critical} Critical Stock</p>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                            <div className=\"bg-pink-500 h-2 rounded-full\" style={{ width: `${blood.percentage}%` }}></div>\n                          </div>\n                          <p className=\"text-xs text-gray-500\">{blood.percentage}% of total</p>\n                        </div>\n                      </div>\n                    </Card>\n                  ))}\n                </div>\n              </Card>\n            </div>\n          )}\n\n          {activeTab === 'users' && (\n            <div className=\"space-y-8\">\n              <Card>\n                <div className=\"flex justify-between items-center mb-6\">\n                  <h3 className=\"text-xl font-semibold text-gray-900\">Users</h3>\n                  <Badge variant=\"default\">{users.length} Total</Badge>\n                </div>\n\n                {loadingUsers && <p className=\"text-gray-600\">Loading users...</p>}\n\n                {!loadingUsers && (\n                  <div className=\"space-y-4\">\n                    {users.map((u) => (\n                      <Card\n                        key={u.id}\n                        className={`border-l-4 ${\n                          u.userType === \"donor\"\n                            ? \"border-l-purple-500\"\n                            : u.userType === \"superAdmin\"\n                            ? \"border-l-pink-500\"\n                            : \"border-l-blue-500\"\n                        }`}\n                      >\n                        <div className=\"flex flex-wrap justify-between items-start gap-2\">\n                          <div className=\"flex-1 min-w-[200px]\">\n                            <h4 className=\"text-lg font-semibold text-gray-900\">{u.name}</h4>\n                            <p className=\"text-sm text-gray-600\">{u.email}</p>\n                            <p className=\"text-sm text-gray-600\">{u.phone || \"No phone\"}</p>\n                            <p className=\"text-sm text-gray-600\">\n                              Joined:{\" \"}\n                              {u.createdAt?.toDate\n                                ? u.createdAt.toDate().toLocaleDateString()\n                                : \"-\"}\n                            </p>\n                          </div>\n\n                          <Badge\n                            variant={\n                              u.userType === \"donor\"\n                                ? \"success\"\n                                : u.userType === \"superAdmin\"\n                                ? \"default\"\n                                : \"pink\"\n                            }\n                          >\n                            {u.userType.toUpperCase()}\n                          </Badge>\n\n                          {/* ONLY show if NOT already superadmin */}\n                          {u.userType !== \"superAdmin\" ? (\n                            <Button\n                              size=\"sm\"\n                              className=\"bg-purple-500 hover:bg-purple-600 text-white\"\n                              onClick={() => makeSuperAdmin(u.id)}\n                            >\n                              Make Super Admin\n                            </Button>\n                          ) : (\n                            <Button\n                              size=\"sm\"\n                              className=\"bg-red-500 hover:bg-red-600 text-white\"\n                              onClick={() => removeSuperAdmin(u.id)}\n                            >\n                              Remove Super Admin\n                            </Button>\n                          )}\n                        </div>\n                      </Card>\n                    ))}\n                  </div>\n                )}\n              </Card>\n            </div>\n          )}\n\n        </div>\n      </section>\n\n      <Footer />\n\n      {showModal && (\n        <div className=\"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50\">\n          <div className=\"bg-white rounded-lg shadow-lg p-6 w-full max-w-md\">\n            <h2 className=\"text-lg font-semibold mb-4 text-gray-900\">\n              Confirm {selectedAction === \"approve\" ? \"Approval\" : \"Rejection\"}\n            </h2>\n            <p className=\"text-gray-600 mb-6\">\n              Are you sure you want to {selectedAction} this blood bank?\n            </p>\n            <div className=\"flex justify-end space-x-3\">\n              <Button onClick={() => setShowModal(false)} className=\"bg-gray-200 text-gray-800\">\n                Cancel\n              </Button>\n              <Button\n                onClick={handleConfirm}\n                className={\n                  selectedAction === \"approve\"\n                    ? \"bg-green-500 hover:bg-green-600 text-white\"\n                    : \"bg-red-500 hover:bg-red-600 text-white\"\n                }\n              >\n                {selectedAction === \"approve\" ? \"Approve\" : \"Reject\"}\n              </Button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["AdminDashboard","activeTab","setActiveTab","useState","globalStats","setGlobalStats","bloodBanks","setBloodBanks","loadingBanks","setLoadingBanks","recentActivity","setRecentActivity","topBloodBanks","setTopBloodBanks","inventoryOverview","setInventoryOverview","showModal","setShowModal","selectedAction","setSelectedAction","selectedBankId","setSelectedBankId","users","setUsers","loadingUsers","setLoadingUsers","makeSuperAdmin","id","userRef","doc","db","updateDoc","prev","u","err","removeSuperAdmin","confirmAction","action","handleConfirm","handleApproveBloodBank","handleRejectBloodBank","loadBloodBanks","q","collection","items","getDocs","d","data","e","loadGlobalStats","banks","totalBloodBanks","approvedBanks","b","pendingBanks","rejectedBanks","pendingApprovals","activeDonors","totalRequests","completedDonations","transSnap","totalRevenue","loadRecentActivity","reqSnap","donationSnap","bankSnap","reqs","dons","approvalsAndRejections","t","a","combined","aTime","loadTopBloodBanks","banksSnap","bankDoc","bankId","bankData","transQuery","query","where","r","donationQuery","donationCount","sorted","loadInventory","totals","type","inv","grandTotal","sum","overview","total","loadUsers","role","useEffect","unsub","onSnapshot","snap","bankRef","now","Timestamp","jsxs","jsx","Header","tab","Card","Button","activity","index","bank","Badge","pending","others","aDate","application","Fragment","blood","Footer"],"mappings":"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"}